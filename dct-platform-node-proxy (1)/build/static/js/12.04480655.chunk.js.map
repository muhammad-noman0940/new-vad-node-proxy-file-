{"version":3,"sources":["global/utils/getCardCategoryTags.js","global/utils/getPriceRange.js","global/utils/hooks/useScript.js","global/utils/hooks/useScriptCached.js","global/containers/common/SimilarSearch/preProcessData.js","global/utils/getApiKey.js","global/components/molecules/MapViewer/BaiduMapComponent.js","global/components/molecules/MapViewer/style.js","global/components/molecules/MapViewer/infoWindow.js","global/components/molecules/MapViewer/constants.js","global/components/molecules/MapViewer/mapTheme.js","global/components/molecules/MapViewer/GoogleMapComponent.js","global/components/molecules/MapViewer/index.js","global/containers/common/BranchesMap/style.js","global/containers/common/BranchesMap/BranchesMap.js","global/containers/common/BranchesMap/locators.js","assets/images/marker-red.png","assets/images/marker-black.png","global/components/molecules/Grid/Grid.style.js","global/components/molecules/Grid/index.js","global/components/molecules/Box/index.js","global/utils/getDictionaryText.js","global/utils/cookie.js","global/utils/getContentType.js","utils/urls.js"],"names":["getCardCategoryTags","item","dictionaryTags","tags","split","length","forEach","tag","push","getPriceRange","expenseValues","expenseRange","expenseRangeParam","expenseRangeSigns","eachHighestNumb","value","breakVal","numbers","val","isNumVal","parseInt","indexOf","Math","max","overAllHighest","range","index","useScript","url","useEffect","script","isAsync","document","createElement","src","async","body","appendChild","createScript","removeChild","deleteScript","cachedScripts","useState","loaded","error","state","setState","includes","onScriptLoad","onScriptError","splice","remove","addEventListener","removeEventListener","routeFilterArray","matchedTagList","getSimilarSearchEventIds","props","similarEvents","get","getMoreLikeThisKeyValues","keyValues","pageContentType","toLowerCase","EVENT_TYPE","key","SIMILAR_EVENT_DETAILS_PAYLOAD_KEY","values","diningTagsFromDictionary","getDictionaryText","diningTagsArrayFromDictionary","matchingTagsData","hasOwnProperty","getMatchingTagsData","tagData","tagDataIndex","tagItem","tagItemIndex","getCategoryTags","contentType","dictionary","TAGS","getBranchesKeyValues","getRequestBody","variation","isEditor","currentItemId","language","isPreviewMode","offset","limit","getProcessedProps","results","fields","cardList","getCardList","featuredText","cardItems","thumbnailSrc","alt","thumbnailImage","primaryCTA","href","itemUrl","text","anchor","linktype","class","title","target","querystring","name","attributeLabelCTA","backgroundColor","desktopImage","mobileImage","location","startDate","endDate","openTime","closeTime","umbrellaEventCount","eventType","featured","isFeatured","isPaid","locationTitle","location_Titles","region","location_Regions","urlSlug","viewsCount","tripAdvisorRating","num_reviews","tripAdvisorNumberOfReviews","rating_image_url","tripAdvisorRatingImageURL","googlePlaceId","priceTagsKeys","priceTags","getAPIKey","apiKeyText","isLanguageEqual","LANGUAGE_CODE","CHINESE","BAIDU_API_KEY","GOOGLE_API_KEY","BaiduMapComponent","bMap","map","markers","isRouteDirection","highlightFirstMarker","labels","apiKey","componentName","pageName","mapCanvas","useRef","mapZoomLevel","activeMarker","setActiveMarker","openAlert","setOpenAlert","useScriptCached","modifyApi","BAIDU_MAP_API_URL","si","setInterval","window","BMap","initMap","clearInterval","getIcon","isActive","Icon","MarkerRed","MarkerBlack","Size","infoWindowAnchor","openMapDirection","lat","lng","BAIDU_DIRECTION_URL","info","a","click","onGeoSuccess","position","coords","latitude","longitude","canUseDOM","onGetDirectionClick","e","preventDefault","Promise","resolve","reject","navigator","permissions","query","then","permission","geolocation","getCurrentPosition","pos","Error","current","Map","centerAndZoom","Point","addControl","NavigationControl","ScaleControl","setMapStyle","style","points","addMarker","infoContent","marker","address","getToolTipContent","Marker","InfoWindow","point","icon","obj","analyticsData","pageBodyInteraction","mapClick","label","createDynamicLabels","pushAnaylyticsData","addAnalyticsInfo","this","openInfoWindow","setIcon","instance","addOverlay","i","setViewport","zoomFactor","start","end","driving","DrivingRoute","renderOptions","autoViewport","selectFirstResult","wp","markr","slice","search","waypoints","handleClose","agreed","console","warn","height","id","ref","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","color","buttonType","size","hasBorder","variant","autoFocus","useStyles","makeStyles","theme","root","maxWidth","maxHeight","stroke","mixins","Black","borderRadius","display","opacity","background","boxShadow","textDecoration","fontSize","pxToRem","fontFamily","typography","primaryBold","marginBottom","breakpoints","up","AbuDhabiRed","marginLeft","palette","default","infoBox","holder","down","marginRight","legends","common","white","padding","bottom","left","width","shadows","list","paddingLeft","margin","borderBottom","borders","divider","paddingBottom","infoWindow","tertiary","directionBtn","marginTop","abuDhabiText","getAbuDhabiText","withSitecoreContext","classes","sitecoreContext","getDirText","className","Typography","component","infoTitle","getDirectionsLinkClick","field","GOOGLE_DIRECTION_URL","isStartIcon","rel","themeColor","EVENTS_THEME_COLOR","googleTheme","featureType","elementType","stylers","visibility","hue","saturation","lightness","gamma","MARKER_SVG","MARKER_SVG_FILLED","MapDirectionsRenderer","directions","setDirections","travelMode","wayPoints","stopover","origin","shift","destination","pop","google","maps","DirectionsService","route","result","status","DirectionsStatus","OK","options","polylineOptions","strokeColor","suppressMarkers","WrappedMap","withScriptjs","withGoogleMap","markrs","polyline","isPolyline","isRedMarker","selectedMarker","setSelectedMarker","setMarkers","bounds","LatLngBounds","fitBounds","getMarkerIcon","path","fillColor","fillOpacity","scale","strokeWeight","labelOrigin","defaultCenter","defaultZoom","defaultOptions","styles","streetViewControl","mapTypeControl","extend","LatLng","onCloseClick","pixelOffset","strokeOpacity","TravelMode","DRIVING","zIndex","Grid","container","spacing","GoogleMapComponent","googleMapURL","GOOGLE_MAP_API","loadingElement","containerElement","mapElement","isItinerary","showLegend","updateMarkers","itineraryMapUrl","filter","getList","viewItineraryMapClick","btnText","contactPerson","clsx","Hidden","mdDown","implementation","getItineraryURLBaidu","markerCopy","cloneDeep","locations","join","getItineraryURLGoogle","lgUp","params","shape","componentSpacing","dictionaryKeys","baiduApiKey","googleApiKey","GetDirections","viewFullItinerary","withErrorBoundary","withNamespaces","getComponentName","getPageName","getOtherBranchesStart","otherBranchesData","t","DEFAULT","undefined","helperKeys","getHelperKeysFromDictionary","branches","branch","toString","parseFloat","Box","data-locator","NoSsr","evalConditionForInsideChina","MapViewer","module","exports","SPACINGS","GRID_SIZES","getOffset","div","parse","String","replace","StyledGrid","withStyles","boxSizing","flexWrap","zeroMinWidth","minWidth","flexDirection","alignItems","alignContent","justifyContent","breakpoint","themeSpacing","generateGutter","keys","reduce","accumulator","globalStyles","round","flexBasis","flexGrow","Object","assign","generateGrid","styleFunction","css","compose","flexbox","positions","sizing","styled","fieldName","i18next","cookie","writeSessionCookie","cname","cvalue","write","exdays","d","Date","setTime","getTime","expires","toUTCString","read","substr","delete","cookiesList","isInsideChina","countryCode","toLocaleLowerCase","INSIDE_CHINA_COUNTRY_CODE","isDomainCN","locationHostArr","hostname","domainCode","evalConditionForSocialShare","evalConditionForIcpLicense","domainName","lastIndexOf","DOMAIN_SUFFIX","CHINA","selectedLanguage","checkLanguage","getAppConfig","urlString","paramobj","apiPath"],"mappings":"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","file":"static/js/12.04480655.chunk.js","sourcesContent":["// This method returns card category tags in the order of the keys provided by the dictionary\r\n// We pick the key from dictionary and extract the tag from api card data\r\n// Each page is having different keys and its order that comes from dictionary service dynamically generated using page contentType\r\nexport const getCardCategoryTags = (item, dictionaryTags) => {\r\n  const tags = [];\r\n  dictionaryTags = dictionaryTags && dictionaryTags.split(',');\r\n  dictionaryTags &&\r\n    dictionaryTags.length > 0 &&\r\n    dictionaryTags.forEach(tag => {\r\n      if (item[tag] && item[tag].length > 0) {\r\n        item[tag][0] && tags.push(item[tag][0]);\r\n        //tags.push(item[tag][getRandomIndex(item[tag].length)]);\r\n      }\r\n    });\r\n  return tags;\r\n};\r\n\r\n// const getRandomIndex = arrayLength => {\r\n//   return Math.floor(Math.random() * arrayLength);\r\n// };\r\n","// This method returns card category tags in the order of the keys provided by the dictionary\r\n// We pick the key from dictionary and extract the tag from api card data\r\n// Each page is having different keys and its order that comes from dictionary service dynamically generated using page contentType\r\nexport const getPriceRange = (expenseValues = '') => {\r\n  let expenseRange = '';\r\n  if (expenseValues && expenseValues.length > 0) {\r\n    const expenseRangeParam = [\r\n      [1, 200],\r\n      [201, 500],\r\n      [501],\r\n    ];\r\n    const expenseRangeSigns = [\r\n      '$',\r\n      '$$',\r\n      '$$$',\r\n    ];\r\n    const eachHighestNumb = [];\r\n    expenseValues.forEach(value => {\r\n      const breakVal = value.split(/[\\ \\-]/);\r\n      const numbers = [];\r\n\r\n      breakVal.forEach(val => {\r\n        let isNumVal = parseInt(val);\r\n        if (isNumVal) {\r\n          // check if val has a + sign\r\n          if (val.indexOf('+') > -1) {\r\n            isNumVal++;\r\n          }\r\n          numbers.push(isNumVal)\r\n        }\r\n      });\r\n      eachHighestNumb.push(Math.max(...numbers));\r\n    });\r\n    const overAllHighest = Math.max(...eachHighestNumb);\r\n    expenseRangeParam.forEach((range, index) => {\r\n      if (!range[1]) {\r\n        if (overAllHighest >= range[0]) {\r\n          expenseRange = expenseRangeSigns[index];\r\n        }\r\n      } else {\r\n        if (overAllHighest >= range[0] && overAllHighest <= range[1]) {\r\n          expenseRange = expenseRangeSigns[index];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return expenseRange;\r\n};\r\n","import { useEffect } from 'react';\r\n\r\n/* This hook will take javascript URL as parameter and load the script after component will mount asynchronously. \r\nIt will also remove the script on component unmount.*/\r\n\r\nexport const createScript = (url, isAsync = true) => {\r\n  // Return if url is undefined or not passed\r\n  if (!url) return '';\r\n\r\n  const script = document.createElement('script');\r\n  script.src = url;\r\n  script.async = isAsync;\r\n  document.body.appendChild(script);\r\n\r\n  return script;\r\n};\r\n\r\nexport const deleteScript = script => {\r\n  script && document.body.removeChild(script);\r\n};\r\n\r\nconst useScript = url => {\r\n  useEffect(() => {\r\n    const script = createScript(url);\r\n\r\n    return () => {\r\n      deleteScript(script);\r\n    };\r\n  }, [url]);\r\n};\r\n\r\nexport default useScript;\r\n","import { useState, useEffect } from 'react';\r\n\r\nlet cachedScripts = [];\r\n\r\nexport default function useScript(src) {\r\n  // Keeping track of script loaded and error state\r\n  const [state, setState] = useState({\r\n    loaded: false,\r\n    error: false,\r\n  });\r\n\r\n  useEffect(\r\n    () => {\r\n      // If cachedScripts array already includes src that means another instance ...\r\n      // ... of this hook already loaded this script, so no need to load again.\r\n      if (cachedScripts.includes(src)) {\r\n        setState({\r\n          loaded: true,\r\n          error: false,\r\n        });\r\n      } else {\r\n        cachedScripts.push(src);\r\n\r\n        // Create script\r\n        let script = document.createElement('script');\r\n        script.src = src;\r\n        script.async = true;\r\n\r\n        // Script event listener callbacks for load and error\r\n        const onScriptLoad = () => {\r\n          setState({\r\n            loaded: true,\r\n            error: false,\r\n          });\r\n        };\r\n\r\n        const onScriptError = () => {\r\n          // Remove from cachedScripts we can try loading again\r\n          const index = cachedScripts.indexOf(src);\r\n          if (index >= 0) cachedScripts.splice(index, 1);\r\n          script.remove();\r\n\r\n          setState({\r\n            loaded: true,\r\n            error: true,\r\n          });\r\n        };\r\n\r\n        script.addEventListener('load', onScriptLoad);\r\n        script.addEventListener('error', onScriptError);\r\n\r\n        // Add script to document body\r\n        document.body.appendChild(script);\r\n\r\n        // Remove event listeners on cleanup\r\n        return () => {\r\n          script.removeEventListener('load', onScriptLoad);\r\n          script.removeEventListener('error', onScriptError);\r\n        };\r\n      }\r\n    },\r\n    [src] // Only re-run effect if script src changes\r\n  );\r\n\r\n  return [state.loaded, state.error];\r\n}\r\n","import get from 'lodash/get';\r\nimport { getCardCategoryTags } from '../../../utils/getCardCategoryTags';\r\nimport { pageContentType } from '../../../utils/getContentType';\r\nimport {\r\n  EVENT_TYPE,\r\n  SIMILAR_EVENT_DETAILS_PAYLOAD_KEY,\r\n} from '../../../../constants/index';\r\nimport { TAGS } from '../../../../constants/index';\r\nimport { getDictionaryText } from '../../../utils/getDictionaryText';\r\nimport { getPriceRange } from '../../../utils/getPriceRange';\r\nlet matchedTagList = [];\r\nlet routeFilterArray;\r\nconst getMatchingTagsData = props => {\r\n  matchedTagList = [];\r\n  // TODO will move it in centralized place to re-use\r\n  const diningTagsFromDictionary = getDictionaryText(\r\n    `${pageContentType(props)}Filters`\r\n  );\r\n  const diningTagsArrayFromDictionary =\r\n    (diningTagsFromDictionary && diningTagsFromDictionary.split(',')) || [];\r\n  let matchingTagsData = [];\r\n  diningTagsArrayFromDictionary &&\r\n    diningTagsArrayFromDictionary.forEach(tag => {\r\n      routeFilterArray = get(props, `sitecoreContext.route.fields[${tag}]`);\r\n      if (\r\n        get(props, 'sitecoreContext.route.fields', {}).hasOwnProperty(tag) &&\r\n        routeFilterArray &&\r\n        routeFilterArray.length > 0\r\n      ) {\r\n        matchedTagList.push(tag);\r\n        matchingTagsData.push(\r\n          get(props, `sitecoreContext.route.fields[${tag}]`)\r\n        );\r\n      }\r\n    });\r\n  return [matchingTagsData, matchedTagList];\r\n};\r\n\r\nconst getSimilarSearchEventIds = props => {\r\n  const similarEvents = get(\r\n    props,\r\n    'sitecoreContext.route.fields.similarEvents.value',\r\n    ''\r\n  );\r\n  const idList = similarEvents && similarEvents.split(',');\r\n  return idList;\r\n};\r\n\r\nconst getMoreLikeThisKeyValues = props => {\r\n  const keyValues = [];\r\n  if (pageContentType(props).toLowerCase() === EVENT_TYPE) {\r\n    keyValues.push({\r\n      key: SIMILAR_EVENT_DETAILS_PAYLOAD_KEY,\r\n      values: getSimilarSearchEventIds(props),\r\n    });\r\n  } else {\r\n    const matchingTagsData = getMatchingTagsData(props);\r\n    matchingTagsData[0].forEach((tagData, tagDataIndex) => {\r\n      tagData &&\r\n        tagData.forEach((tagItem, tagItemIndex) => {\r\n          if (tagItemIndex === 0) {\r\n            keyValues.push({\r\n              key: get(tagItem, 'fields.taxonomyKey.value', ''),\r\n              values: [get(tagItem, 'fields.searchKey.value', '')],\r\n            });\r\n          } else {\r\n            keyValues[tagDataIndex].values.push(\r\n              get(tagItem, 'fields.searchKey.value', '')\r\n            );\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  return keyValues;\r\n};\r\n\r\nconst getCategoryTags = (props, item) => {\r\n  const contentType = pageContentType(props).toLowerCase();\r\n  const dictionary = getDictionaryText(`${contentType}${TAGS}`);\r\n  const tags = getCardCategoryTags(item, dictionary);\r\n  return tags;\r\n};\r\n\r\nconst getBranchesKeyValues = props => {\r\n  const keyValues = [];\r\n  keyValues.push({\r\n    key: 'uniquename', //This is fixed as of now\r\n    values: [get(props, 'sitecoreContext.route.fields.uniqueName.value', '')],\r\n  });\r\n  return keyValues;\r\n};\r\n\r\nexport const getRequestBody = (props, variation, isEditor) => {\r\n  const requestBody = {\r\n    contentType: pageContentType(props).toLowerCase(),\r\n    currentItemId: get(props, 'sitecoreContext.route.itemId', ''),\r\n    language: get(props, 'sitecoreContext.language', ''),\r\n    isPreviewMode: isEditor,\r\n    offset: 0,\r\n    limit: 50, // As discussed with sitecore, we will taking all the data at a time\r\n    keyValues:\r\n      variation === 'Branches'\r\n        ? getBranchesKeyValues(props)\r\n        : getMoreLikeThisKeyValues(props),\r\n  };\r\n  return requestBody;\r\n};\r\n\r\nexport const getProcessedProps = (props, results) => {\r\n  return {\r\n    fields: {\r\n      cardList: getCardList(props, results),\r\n    },\r\n  };\r\n};\r\n\r\nconst getCardList = (props, results) => {\r\n  const featuredText = getDictionaryText('featuredText');\r\n  const cardItems = [];\r\n  results &&\r\n    results.length > 0 &&\r\n    results.forEach(item => {\r\n      const thumbnailSrc = {\r\n        src: get(item, 'thumbnailImage', ''),\r\n        alt: get(item, 'title', ''),\r\n        '3x2-card': {\r\n          'large': get(item, 'thumbnailImage', ''),\r\n        },\r\n      };\r\n      const thumbnailImage = {\r\n        value:\r\n          pageContentType(props).toLowerCase() === EVENT_TYPE\r\n            ? thumbnailSrc\r\n            : get(item, 'thumbnailImage', ''),\r\n      };\r\n      cardItems.push({\r\n        fields: {\r\n          primaryCTA: {\r\n            value: {\r\n              href: item.itemUrl,\r\n              text: '',\r\n              anchor: '',\r\n              linktype: 'internal',\r\n              class: '',\r\n              title: '',\r\n              target: '',\r\n              querystring: '',\r\n            },\r\n          },\r\n          title: { value: item.name },\r\n          attributeLabelCTA: getCategoryTags(props, item),\r\n          backgroundColor: {\r\n            value: 'white',\r\n          },\r\n          desktopImage: thumbnailImage,\r\n          mobileImage: thumbnailImage,\r\n          location: item.location,\r\n          startDate: item.startDate,\r\n          endDate: item.endDate,\r\n          openTime: item.openTime,\r\n          closeTime: item.closeTime,\r\n          umbrellaEventCount: item.umbrellaEventCount,\r\n          eventType: {\r\n            featured: item.isFeatured && featuredText,\r\n            isPaid: item.eventType,\r\n          },\r\n          locationTitle: {\r\n            value:\r\n              get(item, 'location_Titles.length') > 0 &&\r\n              item.location_Titles[0],\r\n          },\r\n          region: {\r\n            value:\r\n              get(item, 'location_Regions.length') > 0 &&\r\n              item.location_Regions[0],\r\n          },\r\n          urlSlug: item.urlSlug,\r\n          viewsCount: item.viewsCount,\r\n          tripAdvisorRating: item.tripAdvisorRating,\r\n          num_reviews: item.tripAdvisorNumberOfReviews,\r\n          rating_image_url: item.tripAdvisorRatingImageURL,\r\n          googlePlaceId: item.googlePlaceId,\r\n          priceTagsKeys: item.priceTagsKeys,\r\n          expenseRange: getPriceRange(item.priceTags),\r\n        },\r\n      });\r\n    });\r\n  return cardItems;\r\n};\r\n","import { isLanguageEqual } from './cookie';\r\nimport { getDictionaryText } from './getDictionaryText';\r\nimport { LANGUAGE_CODE, BAIDU_API_KEY, GOOGLE_API_KEY } from '../../constants';\r\n\r\nexport const getAPIKey = language => {\r\n  const apiKeyText =\r\n    isLanguageEqual(language, LANGUAGE_CODE.CHINESE)\r\n      ? BAIDU_API_KEY\r\n      : GOOGLE_API_KEY;\r\n  return getDictionaryText(apiKeyText);\r\n};\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport get from 'lodash/get';\r\nimport Button from '../../atoms/Button';\r\n// import Grid from '../Grid';\r\nimport MarkerRed from '../../../../assets/images/marker-red.png';\r\nimport MarkerBlack from '../../../../assets/images/marker-black.png';\r\n// import { baiduTheme } from './mapTheme';\r\nimport { useScriptCached } from '../../../utils/hooks';\r\nimport { BAIDU_DIRECTION_URL, BAIDU_MAP_API_URL } from '../../../../constants';\r\nimport { canUseDOM } from '../../../utils/canUseDOM';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { pushAnaylyticsData, createDynamicLabels } from '../../../../utils/analytics';\r\nimport { analyticsData } from '../../../../constants/Analytics/analytics-data';\r\nimport { modifyApi } from '../../../../utils/urls';\r\n\r\nconst BaiduMapComponent = ({\r\n  markers,\r\n  isRouteDirection,\r\n  //isPolyline,\r\n  highlightFirstMarker = true,\r\n  labels,\r\n  apiKey,\r\n  componentName,\r\n  pageName,\r\n}) => {\r\n  const mapCanvas = useRef(null);\r\n  const mapZoomLevel = markers && markers.length > 1 ? 13 : 17;\r\n  const [activeMarker, setActiveMarker] = useState();\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n\r\n  // API should be coming from sitecore\r\n  const [loaded] = useScriptCached(modifyApi(BAIDU_MAP_API_URL, { apiKey }));\r\n\r\n  let bMap;\r\n  let map;\r\n\r\n  useEffect(() => {\r\n    if (loaded && markers.length > 0) {\r\n      const si = setInterval(() => {\r\n        if (window.BMap) {\r\n          bMap = window.BMap;\r\n          initMap();\r\n          clearInterval(si);\r\n        }\r\n      }, 1000);\r\n    }\r\n  }, [loaded, markers]);\r\n\r\n  const getIcon = isActive => {\r\n    return new bMap.Icon(\r\n      isActive ? MarkerRed : MarkerBlack,\r\n      new bMap.Size(40, 60),\r\n      {\r\n        anchor: new bMap.Size(20, 30),\r\n        infoWindowAnchor: new bMap.Size(10, 0),\r\n      }\r\n    );\r\n  };\r\n\r\n  // Get user's consent to use geo location\r\n  const getLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(onGeoSuccess);\r\n    } else {\r\n      console.warn('Geolocation not supported');\r\n    }\r\n  };\r\n\r\n  // redirect to Baidu Map page with direction\r\n  const openMapDirection = (lat, lng) => {\r\n    const url = `${BAIDU_DIRECTION_URL}?origin=latlng:${lat},${lng}|name:Current Location&destination=latlng:${activeMarker.info.lat},${activeMarker.info.lng}|name:${activeMarker.info.name}&mode=driving&region=none&output=html`;\r\n\r\n    const a = document.createElement('a');\r\n    a.target = '_blank';\r\n    a.href = url;\r\n    a.click();\r\n  };\r\n\r\n  // if user grants permission to use geo cordinates\r\n  const onGeoSuccess = position => {\r\n    openMapDirection(position.coords.latitude, position.coords.longitude);\r\n  };\r\n\r\n  // gets geo coordinates if previously agreed\r\n  // if not we will show alert window\r\n  const getCoords = () => {\r\n    return new Promise((resolve, reject) =>\r\n      navigator.permissions\r\n        ? // Permission API is implemented\r\n        navigator.permissions\r\n          .query({\r\n            name: 'geolocation',\r\n          })\r\n          .then(permission =>\r\n            // is geolocation granted?\r\n            permission.state === 'granted'\r\n              ? navigator.geolocation.getCurrentPosition(pos =>\r\n                resolve(pos.coords)\r\n              )\r\n              : resolve(null)\r\n          )\r\n        : // Permission API was not implemented\r\n        reject(new Error('Permission API is not supported'))\r\n    );\r\n  };\r\n\r\n  // Attaches click event on direction button which is attached\r\n  // to the window object.\r\n  useEffect(() => {\r\n    if (canUseDOM) {\r\n      window.onGetDirectionClick = e => {\r\n        e.preventDefault();\r\n\r\n        getCoords().then(coords => {\r\n          if (coords !== null) {\r\n            // we have geo cordinates.\r\n            openMapDirection(coords.latitude, coords.longitude);\r\n          } else {\r\n            // show alert window\r\n            setOpenAlert(true);\r\n          }\r\n        });\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const getToolTipContent = marker => {\r\n    return `<div class=\"makeStyles-infoWindow-532 baidu-infoWindow\">\r\n    <h4 class=\"MuiTypography-root MuiTypography-h6\">${marker.name}</h4>\r\n    <p class=\"MuiTypography-root MuiTypography-body2 makeStyles-address-533\">${\r\n      marker.address\r\n      }</p>\r\n    \r\n    </div>`;\r\n\r\n    // Commenting after </p> tag contents, Changes for vad 1.1 \r\n    // <a onclick='onGetDirectionClick(event)' href=\"#\" class=\"\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"${get(\r\n    //   labels,\r\n    //   'GetDirections.value',\r\n    //   'Get Directions'\r\n    // )}\">\r\n    //   <span class=\"MuiButtonBase-root MuiButton-root MuiButton-text\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\" aria-label=\"Get direction\">\r\n    //     <span class=\"MuiButton-label\">\r\n    //       <span class=\"MuiButton-startIcon MuiButton-iconSizeMedium\">\r\n    //         <span class=\"material-icons MuiIcon-root\" aria-hidden=\"true\">\r\n    //           <svg class=\"MuiSvgIcon-root makeStyles-root-424\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" name=\"ArrowForwardSharpIcon\">\r\n    //             <path d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z\"></path>\r\n    //           </svg>\r\n    //         </span>\r\n    //       </span> \r\n    //       ${get(labels, 'GetDirections.value', 'Get Directions')}\r\n    //     </span>\r\n    //   </span>\r\n    // </a>\r\n  };\r\n\r\n  const addAnalyticsInfo = title => {\r\n    const obj = {\r\n      ...analyticsData.pageBodyInteraction.mapClick,\r\n      ...{ label: createDynamicLabels(pageName, componentName, title) },\r\n    };\r\n    pushAnaylyticsData(obj)\r\n  }\r\n\r\n  const initMap = () => {\r\n    if (mapCanvas.current) {\r\n      map = new bMap.Map(mapCanvas.current);\r\n      map.centerAndZoom(new bMap.Point(116.404, 39.915), 15);\r\n      map.centerAndZoom(new bMap.Point(markers[0].lng, markers[0].lat), mapZoomLevel);\r\n\r\n      map.addControl(new bMap.NavigationControl());\r\n      map.addControl(new bMap.ScaleControl());\r\n\r\n      // use custom style baiduTheme if required by updating the mapTheme.js file\r\n      map.setMapStyle({ style: 'googlelite' });\r\n      // map.setMapStyleV2({ styleJson: baiduTheme });\r\n\r\n      const points = [];\r\n      const addMarker = (item, index) => {\r\n        const { lat, lng, title } = item;\r\n        const infoContent = getToolTipContent(item);\r\n        const { Marker, Point, InfoWindow } = bMap;\r\n        const info = new InfoWindow(infoContent);\r\n        const point = new Point(lng, lat);\r\n        points.push(point);\r\n\r\n        const marker = new Marker(point, {\r\n          icon: getIcon(),\r\n          title: title,\r\n        });\r\n\r\n        marker.addEventListener('click', function () {\r\n          addAnalyticsInfo(title);\r\n          this.openInfoWindow(info);\r\n          this.setIcon(getIcon(true));\r\n          setActiveMarker({ instance: this, info: item });\r\n        });\r\n\r\n        info.addEventListener('close', function () {\r\n          marker.setIcon(getIcon());\r\n          setActiveMarker(null);\r\n        });\r\n\r\n        map.addOverlay(marker);\r\n\r\n        if (highlightFirstMarker && index === 0 && markers.length === 1) {\r\n          marker.openInfoWindow(info);\r\n          marker.setIcon(getIcon(true));\r\n          setActiveMarker({ instance: marker, info: item });\r\n        }\r\n      };\r\n\r\n      markers && markers.map((item, i) => addMarker(item, i));\r\n\r\n      // used for fit bounds in baidu\r\n      map.setViewport(points, { zoomFactor: -1 });\r\n\r\n      if (isRouteDirection) {\r\n        // enabled polyline as a fallback for driving route\r\n        // disable this if driving route works\r\n        // const polyline = new bMap.Polyline(points, { strokeColor: '#f00' });\r\n        // map.addOverlay(polyline);\r\n\r\n        // Enable this to show driving route\r\n        // This is disabled as driving route is not enabled outside\r\n        // China for the current account, check the below link for more info\r\n        // http://lbsyun.baidu.com/index.php?title=webapi/direction-api-abroad\r\n\r\n        const start = new bMap.Point(markers[0].lat, markers[0].lng);\r\n        const end = new bMap.Point(\r\n          markers[markers.length - 1].lat,\r\n          markers[markers.length - 1].lng\r\n        );\r\n\r\n        const driving = new bMap.DrivingRoute(map, {\r\n          renderOptions: {\r\n            map: map,\r\n            autoViewport: true,\r\n            selectFirstResult: true,\r\n          },\r\n        });\r\n        if (markers.length > 2) {\r\n          const wp = markers\r\n            .map(markr => new bMap.Point(markr.lat, markr.lng))\r\n            .slice(1, -1);\r\n          driving.search(start, end, { waypoints: [...wp] }); //waypoints\r\n        } else {\r\n          driving.search(start, end);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // TODO: to remove this piece of code if Nearby Places not required\r\n  // const getNearbyPlaces = () => {\r\n  //   var local = new bMap.LocalSearch(map, {\r\n  //     renderOptions: {\r\n  //       map: map,\r\n  //       autoViewport: false,\r\n  //     },\r\n  //   });\r\n  //   //local.searchNearby('餐馆', new bMap.Point(markers[0].lng, markers[0].lat), 1000);\r\n  //   local.searchNearby(\r\n  //     'restaurant',\r\n  //     new bMap.Point(markers[0].lng, markers[0].lat),\r\n  //     1000\r\n  //   );\r\n  //   //local.setSearchCompleteCallback((result) => { console.log('searched result', result); })\r\n  //   local.setMarkersSetCallback(result => {\r\n  //     console.log('searched result2', result);\r\n  //   });\r\n  //   //console.log('searched result get ', local.getResults());\r\n  // };\r\n\r\n  // to handle close event of the dialong window\r\n  const handleClose = agreed => {\r\n    setOpenAlert(false);\r\n    if (agreed) {\r\n      getLocation();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ height: '100%' }}>\r\n      <div id=\"map_canvas\" ref={mapCanvas} style={{ height: '100%' }}></div>\r\n\r\n      <Dialog\r\n        open={openAlert}\r\n        onClose={() => handleClose(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {get(labels, 'geoDialogTitle.value', '')}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {get(labels, 'geoDialogDescription.value', '')}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose(false)}\r\n            color=\"primary\"\r\n            buttonType=\"primary\"\r\n            size={'small'}\r\n            hasBorder={false}\r\n          >\r\n            {get(labels, 'disagree.value', 'Disagree')}\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleClose(true)}\r\n            color=\"primary\"\r\n            variant={'text'}\r\n            autoFocus\r\n            size={'small'}\r\n            hasBorder={false}\r\n          >\r\n            {get(labels, 'agree.value', 'Agree')}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* {markers && markers.length === 1 && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: '10px',\r\n            left: '10px',\r\n            zIndex: '9999',\r\n          }}\r\n        >\r\n          <Grid container spacing={3}>\r\n            <Grid item>\r\n              <Button\r\n                component=\"span\"\r\n                buttonType=\"form\"\r\n                field={{\r\n                  value: {\r\n                    text: 'Get Direction',\r\n                    //href: `http://api.map.baidu.com/marker?location=39.916979519873,116.41004950566&output=html`,\r\n                    href: `http://api.map.baidu.com/marker?location=${markers &&\r\n                      markers[0].lat},${markers && markers[0].lng}&output=html`,\r\n                    target: '_black',\r\n                  },\r\n                }}\r\n                hasBorder={false}\r\n              />\r\n            </Grid>\r\n            <Grid item>\r\n              <div onClick={getNearbyPlaces}>\r\n                <Button\r\n                  component=\"span\"\r\n                  buttonType=\"form\"\r\n                  field={{\r\n                    value: {\r\n                      text: 'Get Nearby Places',\r\n                    },\r\n                  }}\r\n                  hasBorder={false}\r\n                />\r\n              </div>\r\n            </Grid>\r\n          </Grid> \r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BaiduMapComponent;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport { pxToRem } from '../../../../styles/themes/vad/constants';\r\n\r\nconst useStyles = makeStyles(theme => {\r\n  return {\r\n    root: {\r\n      position: 'relative',\r\n\r\n      '& svg': {\r\n        maxWidth: 'none',\r\n        maxHeight: 'none',\r\n        '& path': {\r\n          stroke: theme.mixins.Black(),\r\n        },\r\n      },\r\n      '& .gm-style-iw-c': {\r\n        borderRadius: 0,\r\n\r\n        '& > button': {\r\n          display: 'none !important',\r\n          opacity: 0,\r\n        },\r\n      },\r\n      '& .gm-style .gm-style-iw-t::after': {\r\n        background: 'transparent',\r\n        boxShadow: 'none',\r\n      },\r\n\r\n      '& .baidu-infoWindow': {\r\n        '& a': {\r\n          textDecoration: 'none',\r\n          fontSize: pxToRem(16),\r\n        },\r\n        '& h4': {\r\n          fontFamily: theme.typography.fontFamily.primaryBold,\r\n          marginBottom: pxToRem(5),\r\n        },\r\n        '& p': {\r\n          fontSize: pxToRem(16),\r\n          marginBottom: pxToRem(8),\r\n\r\n          [theme.breakpoints.up('lg')]: {\r\n            fontSize: pxToRem(20),\r\n          },\r\n        },\r\n        '& .MuiButton-root': {\r\n          fontSize: 'inherit',\r\n          color: theme.mixins.AbuDhabiRed(),\r\n          marginLeft: pxToRem(-5),\r\n          '&:hover': {\r\n            backgroundColor: 'transparent',\r\n          },\r\n        },\r\n        '& svg path': {\r\n          stroke: 'none',\r\n        },\r\n      },\r\n      '& #map_canvas': {\r\n        backgroundColor: theme.palette.background.default,\r\n      },\r\n    },\r\n    infoBox: {\r\n      height: pxToRem(100),\r\n    },\r\n    holder: {\r\n      position: 'relative',\r\n      height: pxToRem(468),\r\n\r\n      [theme.breakpoints.down('lg')]: {\r\n        marginLeft: '-1.5rem',\r\n        marginRight: '-1.5rem',\r\n      },\r\n      [theme.breakpoints.up('lg')]: {\r\n        height: pxToRem(768),\r\n      },\r\n    },\r\n    legends: {\r\n      backgroundColor: theme.palette.common.white,\r\n      padding: pxToRem(20),\r\n\r\n      '&.overlay': {\r\n        position: 'absolute',\r\n        bottom: pxToRem(24),\r\n        left: pxToRem(12),\r\n        width: pxToRem(300),\r\n        boxShadow: theme.shadows[1],\r\n        padding: pxToRem(15),\r\n\r\n        [theme.breakpoints.up('lg')]: {\r\n          width: pxToRem(415),\r\n          padding: pxToRem(20),\r\n        },\r\n      },\r\n    },\r\n    list: {\r\n      paddingLeft: pxToRem(10),\r\n      margin: 0,\r\n\r\n      [theme.breakpoints.up('lg')]: {\r\n        borderBottom: theme.borders.divider,\r\n        paddingBottom: pxToRem(20),\r\n        marginBottom: pxToRem(20),\r\n      },\r\n    },\r\n    infoWindow: {\r\n      maxWidth: pxToRem(415),\r\n      padding: `${pxToRem(5)} ${pxToRem(10)}`,\r\n    },\r\n    address: {\r\n      color: theme.palette.text.tertiary,\r\n      fontSize: pxToRem(16),\r\n    },\r\n    directionBtn: {\r\n      fontSize: pxToRem(16),\r\n      marginTop: 0,\r\n      marginLeft: '-5px',\r\n\r\n      '& .MuiButton-startIcon': {\r\n        padding: 0,\r\n        marginLeft: 0,\r\n      },\r\n\r\n      '& svg path': {\r\n        stroke: 'none',\r\n      },\r\n    },\r\n  };\r\n});\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { withSitecoreContext } from '@sitecore-jss/sitecore-jss-react';\r\n\r\nimport useStyles from './style';\r\nimport Typography from '../../atoms/Typography';\r\nimport Button from '../../atoms/Button';\r\nimport get from 'lodash/get';\r\nimport { GOOGLE_DIRECTION_URL } from '../../../../constants';\r\nimport { EVENT_LIST_TEMPLATE_NAME } from './constants';\r\nimport { EVENTS_THEME_COLOR } from '../../../../constants';\r\nimport { pushAnaylyticsData, createDynamicLabels } from '../../../../utils/analytics';\r\nimport { analyticsData } from '../../../../constants/Analytics/analytics-data';\r\nimport { getDictionaryText } from '../../../utils/getDictionaryText';\r\n\r\n\r\nconst abuDhabiText = getDictionaryText('abuDhabiText');\r\nconst getAbuDhabiText = abuDhabiText === 'abuDhabiText' ? 'Abu Dhabi' : abuDhabiText;\r\n\r\nconst InfoWindow = props => {\r\n  const classes = useStyles();\r\n  const { marker, labels, sitecoreContext, pageName, componentName } = props;\r\n  const contentType = get(\r\n    sitecoreContext,\r\n    'route.fields.contentType.fields.taxonomyKey.value',\r\n    ''\r\n  ).toLowerCase();\r\n  const getDirText = get(labels, 'GetDirections.value', '');\r\n\r\n  const addAnalyticsInfo = () => {\r\n    const obj = {\r\n      ...analyticsData.pageBodyInteraction.getDirectionsLinkClick,\r\n      ...{ label: createDynamicLabels([pageName, componentName, marker && marker.name]) },\r\n    };\r\n    pushAnaylyticsData(obj)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.infoWindow}>\r\n      <Typography variant=\"h5\" component=\"h3\" className={classes.infoTitle}>\r\n        {marker.name}\r\n      </Typography>\r\n      <Typography variant={'body2'} component={'p'} className={classes.address}>\r\n        {marker.address}\r\n      </Typography>\r\n      <Button\r\n        onClick={addAnalyticsInfo}\r\n        className={classes.directionBtn}\r\n        component=\"span\"\r\n        buttonType=\"secondary\"\r\n        field={{\r\n          value: {\r\n            text: getDirText,\r\n            // href: `${GOOGLE_DIRECTION_URL}?api=1&destination=${marker.lat},${marker.lng}`,\r\n            href: `${GOOGLE_DIRECTION_URL}Current+Location/${marker.name},${getAbuDhabiText}/@${marker.lat},${marker.lng}`,\r\n            target: '_blank',\r\n          },\r\n        }}\r\n        isStartIcon={true}\r\n        hasBorder={false}\r\n        rel={'noopener'}\r\n        themeColor={\r\n          contentType === EVENT_LIST_TEMPLATE_NAME ? EVENTS_THEME_COLOR : ''\r\n        }\r\n      >\r\n        <Typography component=\"span\" variant=\"body2Bold\">\r\n          {getDirText}\r\n        </Typography>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withSitecoreContext()(InfoWindow);\r\n","export const EVENT_LIST_TEMPLATE_NAME = 'event';\r\n","const colorLandscape = '#08304b';\r\nconst colorWater = '#021019';\r\n\r\nconst googleTheme = [\r\n  {\r\n    featureType: 'administrative',\r\n    elementType: 'labels',\r\n    stylers: [\r\n      {\r\n        visibility: 'off',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'landscape',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#FFBB00',\r\n      },\r\n      {\r\n        saturation: 43.400000000000006,\r\n      },\r\n      {\r\n        lightness: 37.599999999999994,\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'landscape.man_made',\r\n    elementType: 'labels',\r\n    stylers: [\r\n      {\r\n        visibility: 'off',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'poi',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#00FF6A',\r\n      },\r\n      {\r\n        saturation: -1.0989010989011234,\r\n      },\r\n      {\r\n        lightness: 11.200000000000017,\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'road.highway',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#FFC200',\r\n      },\r\n      {\r\n        saturation: -61.8,\r\n      },\r\n      {\r\n        lightness: 45.599999999999994,\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'road.highway',\r\n    elementType: 'labels',\r\n    stylers: [\r\n      {\r\n        visibility: 'off',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'road.arterial',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#FF0300',\r\n      },\r\n      {\r\n        saturation: -100,\r\n      },\r\n      {\r\n        lightness: 51.19999999999999,\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'road.local',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#FF0300',\r\n      },\r\n      {\r\n        saturation: -100,\r\n      },\r\n      {\r\n        lightness: 52,\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    featureType: 'water',\r\n    elementType: 'all',\r\n    stylers: [\r\n      {\r\n        hue: '#0081ff',\r\n      },\r\n      {\r\n        saturation: '0',\r\n      },\r\n      {\r\n        lightness: '48',\r\n      },\r\n      {\r\n        gamma: 1,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nconst baiduTheme = [\r\n  {\r\n    featureType: 'land',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: colorLandscape },\r\n  },\r\n  {\r\n    featureType: 'water',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: colorWater },\r\n  },\r\n  {\r\n    featureType: 'green',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: '#0e1b30ff' },\r\n  },\r\n  {\r\n    featureType: 'building',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'building',\r\n    elementType: 'geometry.fill',\r\n    stylers: {\r\n      color: '#ffffffb3',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'building',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#dadadab3' },\r\n  },\r\n  {\r\n    featureType: 'subwaystation',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: '#b15454B2' },\r\n  },\r\n  {\r\n    featureType: 'education',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: '#e4f1f1ff' },\r\n  },\r\n  {\r\n    featureType: 'medical',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: '#f0dedeff' },\r\n  },\r\n  {\r\n    featureType: 'scenicspots',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', color: '#e2efe5ff' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', weight: 4 },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#f7c54dff' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#fed669ff' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'labels.text.fill',\r\n    stylers: { color: '#8f5a33ff' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'highway',\r\n    elementType: 'labels.icon',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', weight: 2 },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#d8d8d8ff' },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#ffeebbff' },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'labels.text. fill',\r\n    stylers: { color: '#525355ff' },\r\n  },\r\n  {\r\n    featureType: 'arterial',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: {\r\n      color: '#ffffffff',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', weight: 1 },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#d8d8d8ff' },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'labels.text.fill',\r\n    stylers: { color: '#979c9aff' },\r\n  },\r\n  {\r\n    featureType: 'local',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: {\r\n      color: '#ffffffff',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'railway',\r\n    elementType: 'geometry',\r\n    stylers: {\r\n      visibility: 'on',\r\n      weight: 1,\r\n    },\r\n  },\r\n  {\r\n    featureType: 'railway',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#123c52ff' },\r\n  },\r\n  {\r\n    featureType: 'railway',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#12223dff' },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on', weight: 1 },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#d8d8d8ff' },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#ffffff00' },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'labels.text.fill',\r\n    stylers: { color: '#979c9aff' },\r\n  },\r\n  {\r\n    featureType: 'subway',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'continent',\r\n    elementType: 'labels',\r\n    stylers: {\r\n      visibility: 'on',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'continent',\r\n    elementType: 'labels.icon',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: ' continent',\r\n    elementType: 'labels.text.fill',\r\n    stylers: { color: '#333333ff' },\r\n  },\r\n  {\r\n    featureType: 'continent',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'city',\r\n    elementType: 'labels.icon',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  { featureType: 'city', elementType: 'labels', stylers: { visibility: 'on' } },\r\n  {\r\n    featureType: 'city',\r\n\r\n    elementType: 'labels.text.fill',\r\n    stylers: {\r\n      color: '#454d50ff',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'city',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: {\r\n      color: '#ffffffff',\r\n    },\r\n  },\r\n  {\r\n    featureType: 'town',\r\n    elementType: 'labels.icon',\r\n    stylers: {\r\n      visibility: 'on',\r\n    },\r\n  },\r\n  { featureType: 'town', elementType: 'labels', stylers: { visibility: 'on' } },\r\n  {\r\n    featureType: 'town',\r\n    elementType: 'labels.text. fill',\r\n    stylers: { color: '#454d50ff' },\r\n  },\r\n  {\r\n    featureType: 'town',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'road',\r\n    elementType: 'geometry.fill',\r\n    stylers: { color: '#12223dff' },\r\n  },\r\n  {\r\n    featureType: 'poilabel ',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'districtlabel',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'off' },\r\n  },\r\n  {\r\n    featureType: 'road',\r\n    elementType: 'geometry',\r\n    stylers: { visibility: 'on' },\r\n  },\r\n  {\r\n    featureType: 'road',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'off' },\r\n  },\r\n  {\r\n    featureType: 'road',\r\n    elementType: 'geometry.stroke',\r\n    stylers: { color: '#ffffff00' },\r\n  },\r\n  {\r\n    featureType: 'district',\r\n    elementType: 'labels',\r\n    stylers: { visibility: 'off ' },\r\n  },\r\n  {\r\n    featureType: 'poilabel',\r\n    elementType: 'labels.icon',\r\n    stylers: { visibility: 'off' },\r\n  },\r\n  {\r\n    featureType: 'poilabel',\r\n    elementType: 'labels.text.fill',\r\n    stylers: { color: '#2dc4bbff' },\r\n  },\r\n  {\r\n    featureType: 'poilabel',\r\n    elementType: 'labels.text. stroke',\r\n    stylers: { color: '#ffffff00' },\r\n  },\r\n  {\r\n    featureType: 'manmade',\r\n    elementType: 'geometry',\r\n    stylers: { color: '#12223dff' },\r\n  },\r\n  {\r\n    featureType: 'districtlabel',\r\n    elementType: 'labels.text.stroke',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'entertainment',\r\n    elementType: 'geometry',\r\n    stylers: { color: '#ffffffff' },\r\n  },\r\n  {\r\n    featureType: 'shopping',\r\n    elementType: 'geometry',\r\n    stylers: { color: '#12223dff' },\r\n  },\r\n];\r\n\r\nexport { googleTheme, baiduTheme };\r\n","/* global google */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  withGoogleMap,\r\n  GoogleMap,\r\n  withScriptjs,\r\n  Marker,\r\n  InfoWindow,\r\n  DirectionsRenderer,\r\n  Polyline,\r\n} from 'react-google-maps';\r\n\r\nimport Grid from '../Grid';\r\n// import { getGooglePlaceDetailsByPlaceID } from '../../../utils/GoogleAPI';\r\nimport { canUseDOM } from '../../../utils/canUseDOM';\r\nimport CustomInfoWindow from './infoWindow';\r\nimport { googleTheme } from './mapTheme';\r\n// import { useTheme } from '@material-ui/core/styles';\r\n// import { breakpoints } from '../../../../styles/themes/vad/constants';\r\nimport { EVENT_LIST_TEMPLATE_NAME } from './constants';\r\nimport { pushAnaylyticsData, createDynamicLabels } from '../../../../utils/analytics';\r\nimport { analyticsData } from '../../../../constants/Analytics/analytics-data';\r\nimport { GOOGLE_MAP_API } from '../../../../constants';\r\n\r\nconst MARKER_SVG =\r\n  'M19.5,0 C8.71928571,0 0,8.764 0,19.6 C0,34.3 19.5,56 19.5,56 C19.5,56 39,34.3 39,19.6 C39,8.764 30.2807143,0 19.5,0 Z M20,27 C16.136,27 13,23.864 13,20 C13,16.136 16.136,13 20,13 C23.864,13 27,16.136 27,20 C27,23.864 23.864,27 20,27 Z';\r\n\r\nconst MARKER_SVG_FILLED =\r\n  'M19.5,0C8.7,0,0,8.8,0,19.6C0,34.3,19.5,56,19.5,56S39,34.3,39,19.6,C39,8.8,30.3,0,19.5,0z';\r\n\r\nconst MapDirectionsRenderer = props => {\r\n  const [directions, setDirections] = useState(null);\r\n  const { markers, travelMode } = props;\r\n\r\n  const wayPoints = markers.map(marker => ({\r\n    location: { lat: marker.lat, lng: marker.lng },\r\n    stopover: true,\r\n  }));\r\n  const origin = wayPoints && wayPoints.length > 0 && wayPoints.shift().location;\r\n  const destination = wayPoints && wayPoints.length > 0 && wayPoints.pop().location;\r\n  const directionsService = new google.maps.DirectionsService();\r\n\r\n  directionsService.route(\r\n    {\r\n      origin: origin,\r\n      destination: destination,\r\n      travelMode: travelMode,\r\n      waypoints: wayPoints,\r\n    },\r\n    (result, status) => {\r\n      if (status === google.maps.DirectionsStatus.OK) {\r\n        setDirections(result);\r\n      }\r\n    }\r\n  );\r\n  return (\r\n    directions && (\r\n      <DirectionsRenderer\r\n        directions={directions}\r\n        options={{\r\n          polylineOptions: {\r\n            strokeColor: 'black',\r\n          },\r\n          suppressMarkers: true,\r\n        }}\r\n      />\r\n    )\r\n  );\r\n};\r\n\r\nconst WrappedMap = withScriptjs(\r\n  withGoogleMap(props => {\r\n    const {\r\n      //googleMapURL,\r\n      markers: markrs,\r\n      polyline,\r\n      isRouteDirection,\r\n      isPolyline,\r\n      //classes,\r\n      labels,\r\n      highlightFirstMarker = false,\r\n      isRedMarker = false,\r\n      contentType,\r\n      pageName,\r\n      componentName,\r\n    } = props;\r\n\r\n    const map = useRef(null);\r\n    // const theme = useTheme();\r\n    let mapZoomLevel = markrs && markrs.length > 1 ? 12 : 17;\r\n    const [selectedMarker, setSelectedMarker] = useState(\r\n      markrs.length > 1\r\n        ? {\r\n          index: 0,\r\n          marker: markrs[0],\r\n        }\r\n        : null\r\n    );\r\n    const [markers, setMarkers] = useState(markrs);\r\n\r\n    const bounds = canUseDOM && new window.google.maps.LatLngBounds();\r\n\r\n    useEffect(() => {\r\n      setMarkers(markrs);\r\n      mapZoomLevel = markrs && markrs.length > 1 ? 12 : 17;\r\n      setSelectedMarker(\r\n        markrs.length === 1 || highlightFirstMarker\r\n          ? {\r\n            index: 0,\r\n            marker: markrs[0],\r\n          }\r\n          : null\r\n      );\r\n\r\n      if (map.current && markrs.length > 1) {\r\n        map.current.fitBounds(bounds);\r\n      }\r\n    }, [markrs]);\r\n\r\n    // TODO: to remove this piece of code if Nearby Places not required\r\n    // const getNearbyPlaces = () => {\r\n    //   const pyrmont = new google.maps.LatLng(\r\n    //     markers && markers[0].lat,\r\n    //     markers && markers[0].lng\r\n    //   );\r\n    //   const request = {\r\n    //     location: pyrmont,\r\n    //     radius: '1000',\r\n    //     type: ['restaurant'],\r\n    //   };\r\n    //   const service = new google.maps.places.PlacesService();\r\n    //   // window.map.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\r\n    //   service.nearbySearch(request, (results, status) => {\r\n    //     if (status === google.maps.places.PlacesServiceStatus.OK) {\r\n    //       const nearbyMarkers = [];\r\n    //       for (var i = 0; i < results.length; i++) {\r\n    //         const { id, name, geometry } = results[i] || {};\r\n    //         nearbyMarkers.push({\r\n    //           id,\r\n    //           name,\r\n    //           lat: geometry.location.lat(),\r\n    //           lng: geometry.location.lng(),\r\n    //         });\r\n    //       }\r\n    //       setMarkers(currentMarkers => [...currentMarkers, ...nearbyMarkers]);\r\n    //       console.log('nearbyMarkers', results);\r\n    //     }\r\n    //   });\r\n    // };\r\n\r\n    // TODO: fill the primary and seconday color from the theme\r\n    const getMarkerIcon = (isActive = false) => {\r\n      let fillColor = '';\r\n      if (isActive) {\r\n        if (contentType === EVENT_LIST_TEMPLATE_NAME) {\r\n          fillColor = '#690FA8';\r\n        } else {\r\n          fillColor = '#C2002F';\r\n        }\r\n      } else {\r\n        fillColor = '#000000';\r\n      }\r\n      return {\r\n        path: isRouteDirection ? MARKER_SVG_FILLED : MARKER_SVG,\r\n        fillColor: fillColor,\r\n        fillOpacity: 1,\r\n        scale: 1,\r\n        strokeWeight: 0,\r\n        anchor: new google.maps.Point(24, 55),\r\n        labelOrigin: new google.maps.Point(20, 20),\r\n      };\r\n    };\r\n    const addAnalyticsInfo = title => {\r\n      const obj = {\r\n        ...analyticsData.pageBodyInteraction.mapClick,\r\n        ...{ label: createDynamicLabels([pageName, componentName, title]) },\r\n      };\r\n      pushAnaylyticsData(obj);\r\n    };\r\n\r\n    const makeMarkers = () => {\r\n      return markers.map((marker, i) => {\r\n        bounds.extend(new window.google.maps.LatLng(marker.lat, marker.lng));\r\n        return (\r\n          <Marker\r\n            icon={\r\n              (selectedMarker && selectedMarker.index === i) || isRedMarker\r\n                ? getMarkerIcon(true)\r\n                : getMarkerIcon()\r\n            }\r\n            key={`marker-${i}`}\r\n            label={\r\n              isRouteDirection\r\n                ? { text: `${i + 1}`, color: 'white', fontSize: '24px' }\r\n                : ''\r\n            }\r\n            title={marker.name}\r\n            name={marker.name}\r\n            position={{ lat: marker.lat, lng: marker.lng }}\r\n            onClick={() => {\r\n              addAnalyticsInfo(marker.name);\r\n              setSelectedMarker({ index: i, marker: marker });\r\n            }}\r\n          />\r\n        );\r\n      });\r\n    };\r\n\r\n    const onMapClick = () => {\r\n      setSelectedMarker(null);\r\n    };\r\n\r\n    return (\r\n      <GoogleMap\r\n        ref={map}\r\n        defaultCenter={{\r\n          lat: markers && markers[0].lat,\r\n          lng: markers && markers[0].lng,\r\n        }}\r\n        defaultZoom={mapZoomLevel}\r\n        defaultOptions={{\r\n          styles: googleTheme,\r\n          streetViewControl: false,\r\n          mapTypeControl: false,\r\n        }}\r\n        onClick={onMapClick}\r\n      >\r\n        {makeMarkers()}\r\n\r\n        {selectedMarker && (\r\n          <InfoWindow\r\n            position={{\r\n              lat: selectedMarker.marker.lat,\r\n              lng: selectedMarker.marker.lng,\r\n            }}\r\n            onCloseClick={() => {\r\n              setSelectedMarker(null);\r\n            }}\r\n            options={{ pixelOffset: { width: 0, height: -70 } }}\r\n          >\r\n            <CustomInfoWindow\r\n              marker={selectedMarker.marker}\r\n              labels={labels}\r\n              componentName={componentName}\r\n              pageName={pageName}\r\n            />\r\n          </InfoWindow>\r\n        )}\r\n\r\n        {isPolyline && (\r\n          <Polyline\r\n            path={polyline}\r\n            options={{\r\n              strokeColor: 'red',\r\n              strokeOpacity: 0.8,\r\n              strokeWeight: 2,\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {isRouteDirection && (\r\n          <MapDirectionsRenderer\r\n            markers={markers}\r\n            travelMode={google.maps.TravelMode.DRIVING}\r\n          />\r\n        )}\r\n\r\n        {markers.length === 1 && (\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              bottom: '10px',\r\n              left: '10px',\r\n              zIndex: '9999',\r\n            }}\r\n          >\r\n            <Grid container spacing={3}>\r\n              {/* <Grid item>\r\n                <Button\r\n                  component=\"span\"\r\n                  buttonType=\"form\"\r\n                  field={{\r\n                    value: {\r\n                      text: 'Get Direction',\r\n                      //href: `https://www.google.ae/maps/dir/Current+Location/${markers && markers[0].lat},${markers && markers[0].lng}`,\r\n                      href: `https://www.google.ae/maps/dir/?api=1&destination=${markers &&\r\n                        markers[0].lat},${markers && markers[0].lng}`,\r\n                      target: '_black',\r\n                    },\r\n                  }}\r\n                  hasBorder={false}\r\n                />\r\n              </Grid> */}\r\n              {/* <Grid item>\r\n                <div onClick={getNearbyPlaces}>\r\n                  <Button\r\n                    component=\"span\"\r\n                    buttonType=\"form\"\r\n                    field={{\r\n                      value: {\r\n                        text: 'Get Nearby Places',\r\n                      },\r\n                    }}\r\n                    hasBorder={false}\r\n                  />\r\n                </div>\r\n              </Grid> */}\r\n            </Grid>\r\n          </div>\r\n        )}\r\n      </GoogleMap>\r\n    );\r\n  })\r\n);\r\n\r\nconst GoogleMapComponent = props => {\r\n  return props.markers.length > 0 ? (\r\n    <WrappedMap\r\n      googleMapURL={`${GOOGLE_MAP_API}?key=${props.apiKey}&language=${props.language}&libraries=geometry,drawing,places`}\r\n      loadingElement={<div style={{ height: '100%' }} />}\r\n      containerElement={<div style={{ height: '100%' }} />}\r\n      mapElement={<div style={{ height: '100%' }} />}\r\n      {...props}\r\n    />\r\n  ) : null;\r\n};\r\n\r\nexport default GoogleMapComponent;\r\n","import React from 'react';\r\nimport { withSitecoreContext, Text } from '@sitecore-jss/sitecore-jss-react';\r\n\r\nimport BaiduMapComponent from './BaiduMapComponent';\r\nimport GoogleMapComponent from './GoogleMapComponent';\r\nimport useStyles from './style';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport clsx from 'clsx';\r\nimport Button from '../../atoms/Button';\r\nimport { get, cloneDeep } from 'lodash';\r\nimport {\r\n  LANGUAGE_CODE,\r\n  GOOGLE_DIRECTION_URL,\r\n  BAIDU_DIRECTION_URL,\r\n} from '../../../../constants';\r\nimport { pushAnaylyticsData, createDynamicLabels } from '../../../../utils/analytics';\r\nimport { analyticsData } from '../../../../constants/Analytics/analytics-data';\r\nimport { isLanguageEqual } from '../../../utils/cookie';\r\nimport Typography from '../../atoms/Typography';\r\n\r\n\r\nconst MapViewer = props => {\r\n  const classes = useStyles();\r\n  const { isItinerary = false, showLegend = false, markers: updateMarkers, labels, sitecoreContext, componentName, pageName, itineraryMapUrl } = props;\r\n\r\n  const markers = updateMarkers && updateMarkers.filter(item => item && item.lat && item.lng);\r\n\r\n  const contentType = get(\r\n    sitecoreContext,\r\n    'route.fields.contentType.fields.taxonomyKey.value',\r\n    ''\r\n  ).toLowerCase();\r\n\r\n  const getList = markers && markers.map((marker, i) => (\r\n    <li key={`marker-legend-${i}`}>{marker.name}</li>\r\n  ));\r\n\r\n  const getItineraryURLGoogle = () => {\r\n    const markerCopy = cloneDeep(markers);\r\n    const origin = markerCopy && markerCopy.shift();\r\n    const destination = markerCopy && markerCopy.pop();\r\n    const locations = markerCopy && markerCopy\r\n      .map(marker => marker && `${marker.lat},${marker.lng}|`)\r\n      .join('');\r\n\r\n    return origin && destination && `${GOOGLE_DIRECTION_URL}?api=1&origin=${origin.lat},${origin.lng}&destination=${destination.lat},${destination.lng}&waypoints=${locations}`;\r\n  };\r\n\r\n  const getItineraryURLBaidu = () => {\r\n    if (markers && markers.length > 0) {\r\n      return `${BAIDU_DIRECTION_URL}?origin=latlng:${markers[0].lat},${markers[0].lng\r\n        }|name:${markers[0].name}&destination=latlng:${markers[markers.length - 1].lat\r\n        },${markers[markers.length - 1].lng}|name:${markers[markers.length - 1].name\r\n        }&mode=driving&region=none&output=html`;\r\n    }\r\n  };\r\n  const addAnalyticsInfo = () => {\r\n\r\n    const obj = {\r\n      ...analyticsData.pageBodyInteraction.viewItineraryMapClick,\r\n      ...{ label: createDynamicLabels([pageName, componentName, get(props, 'sitecoreContext.route.fields.name.value', '')]) },\r\n    };\r\n    pushAnaylyticsData(obj)\r\n  }\r\n  const btnText = <Typography\r\n    variant=\"body2Bold\"\r\n    component=\"span\"\r\n    className={classes.contactPerson}\r\n  >\r\n    <Text field={{\r\n      value: get(\r\n        labels,\r\n        'viewFullItinerary.value',\r\n        ''\r\n      ),\r\n    }} />\r\n  </Typography>;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.holder}>\r\n        {isLanguageEqual(props.language, LANGUAGE_CODE.CHINESE) ? (\r\n          <BaiduMapComponent {...{ ...props, markers, classes }} componentName={componentName} pageName={pageName} />\r\n        ) : (\r\n            <GoogleMapComponent {...{ ...props, markers, classes }} componentName={componentName} pageName={pageName} contentType={contentType} />\r\n          )}\r\n        {isItinerary && showLegend && !isLanguageEqual(props.language, LANGUAGE_CODE.CHINESE) && (\r\n          <div className={clsx(classes.legends, 'overlay')}>\r\n            {showLegend && (\r\n              <Hidden mdDown implementation=\"css\">\r\n                <ol className={classes.list}>{getList}</ol>\r\n              </Hidden>\r\n            )}\r\n            <Button\r\n              className={classes.directionBtn}\r\n              component=\"span\"\r\n              buttonType=\"secondary\"\r\n              size=\"small\"\r\n              field={{\r\n                value: {\r\n                  text: btnText,\r\n                  href:\r\n                    !isLanguageEqual(props.language, LANGUAGE_CODE.CHINESE)\r\n                      ? getItineraryURLGoogle()\r\n                      : getItineraryURLBaidu(),\r\n                  target: '_blank',\r\n                },\r\n              }}\r\n              isStartIcon={true}\r\n              hasBorder={false}\r\n              rel={'noopener'}\r\n              onClick={addAnalyticsInfo}\r\n            />\r\n          </div>\r\n        )}\r\n        {isItinerary && !showLegend && itineraryMapUrl && !isLanguageEqual(props.language, LANGUAGE_CODE.CHINESE) && (\r\n          <div className={clsx(classes.legends, 'overlay')}>\r\n            <Button\r\n              className={classes.directionBtn}\r\n              component=\"span\"\r\n              buttonType=\"secondary\"\r\n              size=\"small\"\r\n              field={{\r\n                value: {\r\n                  text: btnText,\r\n                  href: itineraryMapUrl,\r\n                  target: '_blank',\r\n                },\r\n              }}\r\n              isStartIcon={true}\r\n              hasBorder={false}\r\n              rel={'noopener'}\r\n              onClick={addAnalyticsInfo}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      {isItinerary && showLegend && (\r\n        <Hidden lgUp implementation=\"css\">\r\n          <div className={classes.legends}>\r\n            <ol className={classes.list}>{getList}</ol>\r\n          </div>\r\n        </Hidden>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withSitecoreContext()(MapViewer);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    backgroundColor: ({ params }) => params && params.backgroundColor,\r\n    ...theme.shape.componentSpacing,\r\n    marginTop: theme.spacing(6),\r\n    [theme.breakpoints.up('lg')]: {\r\n      marginTop: theme.spacing(11),\r\n    },\r\n  },\r\n  title: {\r\n    marginBottom: theme.spacing(3),\r\n    [theme.breakpoints.up('lg')]: {\r\n      marginBottom: theme.spacing(5),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import React, { useEffect } from 'react';\r\nimport get from 'lodash/get';\r\nimport { withSitecoreContext } from '@sitecore-jss/sitecore-jss-react';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nimport withErrorBoundary from '../../../utils/HOCs/withErrorBoundary';\r\nimport Box from '../../../components/molecules/Box';\r\nimport useStyles from './style';\r\nimport MapViewer from '../../../components/molecules/MapViewer';\r\nimport Grid from '../../../components/molecules/Grid';\r\nimport Typography from '../../../components/atoms/Typography';\r\nimport { Text } from '@sitecore-jss/sitecore-jss-react';\r\nimport { getRequestBody } from '../SimilarSearch/preProcessData';\r\nimport { getHelperKeysFromDictionary } from '../../../../utils/utility';\r\nimport { evalConditionForInsideChina } from '../../../utils/cookie';\r\nimport { LANGUAGE_CODE, BAIDU_API_KEY, GOOGLE_API_KEY } from '../../../../constants';\r\nimport { COMPONENT_NAME } from './locators';\r\nimport { getComponentName, getPageName } from '../../../utils/getPageComponentInfo';\r\nimport { NoSsr } from '@material-ui/core';\r\nimport { getAPIKey } from '../../../utils/getApiKey';\r\n\r\nexport const dictionaryKeys = {\r\n  baiduApiKey: BAIDU_API_KEY,\r\n  googleApiKey: GOOGLE_API_KEY,\r\n  GetDirections: 'GetDirections',\r\n  viewFullItinerary: 'viewFullItinerary',\r\n};\r\n\r\nconst BranchesMap = props => {\r\n  const classes = useStyles(props);\r\n  const componentName = getComponentName(props);\r\n  const pageName = getPageName(props);\r\n  //const [isMapLoaded, setIsMapLoaded] = useState(true);\r\n\r\n  const { getOtherBranchesStart, otherBranchesData, t } = props;\r\n\r\n  const sitecoreContext = get(props, 'sitecoreContext', []);\r\n  const language = get(sitecoreContext, 'language', LANGUAGE_CODE.DEFAULT);\r\n\r\n  const title = get(sitecoreContext, 'route.fields.heading', undefined);\r\n\r\n  const helperKeys = getHelperKeysFromDictionary(t, dictionaryKeys);\r\n\r\n  useEffect(() => {\r\n    if (!otherBranchesData.length && get(sitecoreContext, 'language', '')) {\r\n      getOtherBranchesStart(getRequestBody(props, 'Branches'));\r\n    }\r\n  }, [get(sitecoreContext, 'language', '')]);\r\n\r\n  const branches = otherBranchesData.length\r\n    ? otherBranchesData.map((branch, i) => {\r\n      return {\r\n        id: (i + 2).toString(),\r\n        name: branch.name,\r\n        lat: parseFloat(branch.latitude),\r\n        lng: parseFloat(branch.longitude),\r\n        address: branch.location,\r\n      };\r\n    })\r\n    : [];\r\n\r\n  let locations = [\r\n    {\r\n      id: '1',\r\n      name: get(sitecoreContext, 'route.fields.name.value', ''),\r\n      lat: parseFloat(get(sitecoreContext, 'route.fields.latitude.value')),\r\n      lng: parseFloat(get(sitecoreContext, 'route.fields.longitude.value')),\r\n      address: get(sitecoreContext, 'route.fields.location.value', ''),\r\n    },\r\n    ...branches,\r\n  ];\r\n  locations = locations.length > 0 && locations.filter(item => item && item.lat && item.lng);\r\n  const apiKey = getAPIKey(language);\r\n\r\n  // if (isMapLoaded && isLanguageEqual(language, LANGUAGE_CODE.CHINESE)) {\r\n  //   fetch(modifyApi(BAIDU_MAP_API_URL, { apiKey }))\r\n  //     .catch(err => {\r\n  //       console.log(\"Map is not loading due to: \", err);\r\n  //       setIsMapLoaded(false);\r\n  //     });\r\n  // }\r\n  // if (!isMapLoaded) {\r\n  //   return null;\r\n  // }\r\n\r\n  return (\r\n    <Box className={classes.root} data-locator={COMPONENT_NAME}>\r\n      <NoSsr>\r\n        {!evalConditionForInsideChina(language) &&\r\n          locations.length > 0 &&\r\n          apiKey && <Grid>\r\n            {title && (\r\n              <Typography\r\n                variant=\"h4\"\r\n                component=\"h2\"\r\n                className={classes.title}\r\n              >\r\n                <Text field={title} />\r\n              </Typography>\r\n            )}\r\n            <MapViewer\r\n              language={language}\r\n              markers={locations}\r\n              isRouteDirection={false}\r\n              highlightFirstMarker={true}\r\n              labels={helperKeys}\r\n              apiKey={apiKey}\r\n              componentName={componentName}\r\n              pageName={pageName}\r\n            />\r\n          </Grid>}\r\n      </NoSsr>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default withErrorBoundary(\r\n  withSitecoreContext()(withNamespaces()(BranchesMap))\r\n);\r\n","export const COMPONENT_NAME = 'BranchesMap';\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAA8CAYAAAAUufjgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAApJJREFUeNrsmYFtwjAQRQ1iAJiAMEGZoIQJgAkKG8AErScgTFA2gE5A6AJNJyBswAg9S0eFUjvxnR0HVZxkRUghfrk7/zs7Qjzsn1uL+8dP8TSFywjGEEZsuC3DcYSxfxbfl1oBAaoLlyWMFxgRcS4Ft4chATT3DghwCuwVRtdD5BIEvTgDotd2JWHkmvLiDCCzspvaFXAqv041wAlMkQPMMWd5EOEOnkJaZQvw5NYaEMN6CgR3XUBjXbhNId4FhBM41w4dUw6IqzUW4S1ClTCHuIHQ6mxwq5NFDy4bhhNFLxY9eGJUiNsqccbffUyTiAnZu4p4p1BbOQ+UqjLoqgJq3JoRFcWyLYZ4xNSvN1PJQm0bo4cpNtLl4JDqOZO4FiCVts2Izx7qAGNiziW2NwNkCpfUFZBinN7ugzMRF/DM+E8WEjCYcQH7zFIWDJBTqyeugJQciaoaTU1vOSU8P3UFVLbGiW22DO/cBdV2kIEutuyxRVdOLQLHP82CY6uV4gtmNwtiQgzrbxEAje2ZuhkVinnDyrIFwIVpFcs7kD5plBnsZLdNwhVPHVqaxI4wF0NbDnCDSqHGN0gaAFxRKolkNJkuloJj9taA2ErJpr1XevThuIliywq1WVgEOPJYsbsZbNX3NQJuqjpzm/PBumRHKyvkfhBlR4ZcGJyGNfEsO0ZZYQFinqxCe4/U8uMmPfMkK5l3QOqbc2XFCdCD7Ejqhp/8pclBdqxkxXnb6SA7rKrE3RdTZSfF9AgDyJAddk1nn80QZCehfDz0BmgpO859pROghexIzjdiJ5kxyM6XZsPPkhXfIb7KzqauZtfXAaaSndyHrNQCqNlk1b1VYOejOu1a+3xmp4YuORcPuyP7EWAAKZfRNcRqyTIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAA8CAYAAAAUufjgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAepJREFUeNrsmNFtwyAQhkm7AJkgHsEb1BvU3cDdwBvUGzCCR0g7Ae0EzmPfnEyQbODyQCUaQeDOwKEqv/Q/RI7x+TDfHTB21z/XZsW9rfKTcq3cOP5z0P5Sfle+pH4hrjwoz8oL0GflUblKFVyvH7JEsNAvGy1rMlJgpmf9eaxSHTFrrmnvSg3OdIeZ1lzB/WYSNN0yY3DmN8lDV+tCZFHa1Nr8h5MPluxx4ur2dqvUzUjSX3QpO+nfO13+sFVjayuLLXJKhhtZ75CfjBU7IhG/MDwdY6BlAExZAxx7sg0CBSt0MUETYF3FocL0dh+YB2EDPCHuOeQMMJuwAe4Q96zupKGFHao9ZpGYmhL2cDVwbGkbZEzUw3HEywvXNhLTaDaezE2IcVtbs8AhTeOVPjXnDsaCeDYfBGw8tq6LI6PtBZ112EQBdYBeHFFmcQgFKkVwILYKggBBCyr35kliD4tyBYg+o5mpsRK7VcdUotXb3D01VqiwE4SVx8DauPE0BRi9Kn/HPGU9U2PFp64ErPg0UWMlNXaiYCUldvocW9WKZehWIJiJhZ0X5WOuDT8UO5IRCIKdihEpBDuCEaopAStrsNOzAlQ5FszMCtJgCbApKUB+tT2QrEB1JWDFJ0mNlZCDSs7uKkg/AgwAxPSaC+rYtYoAAAAASUVORK5CYII=\"","export const SPACINGS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\nexport const GRID_SIZES = ['auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nfunction generateGrid(globalStyles, theme, breakpoint) {\r\n  const styles = {};\r\n\r\n  GRID_SIZES.forEach(size => {\r\n    const key = `grid-${breakpoint}-${size}`;\r\n\r\n    if (size === true) {\r\n      // For the auto layouting\r\n      styles[key] = {\r\n        flexBasis: 0,\r\n        flexGrow: 1,\r\n        maxWidth: '100%',\r\n      };\r\n      return;\r\n    }\r\n\r\n    if (size === 'auto') {\r\n      styles[key] = {\r\n        flexBasis: 'auto',\r\n        flexGrow: 0,\r\n        maxWidth: 'none',\r\n      };\r\n      return;\r\n    }\r\n\r\n    // Keep 7 significant numbers.\r\n    const width = `${Math.round((size / 12) * 10e7) / 10e5}%`;\r\n\r\n    // Close to the bootstrap implementation:\r\n    // https://github.com/twbs/bootstrap/blob/8fccaa2439e97ec72a4b7dc42ccc1f649790adb0/scss/mixins/_grid.scss#L41\r\n    styles[key] = {\r\n      flexBasis: width,\r\n      flexGrow: 0,\r\n      maxWidth: width,\r\n    };\r\n  });\r\n\r\n  // No need for a media query for the first size.\r\n  if (breakpoint === 'xs') {\r\n    Object.assign(globalStyles, styles);\r\n  } else {\r\n    globalStyles[theme.breakpoints.up(breakpoint)] = styles;\r\n  }\r\n}\r\n\r\nfunction getOffset(val, div = 1) {\r\n  const parse = parseFloat(val);\r\n  return `${parse / div}${String(val).replace(String(parse), '') || 'px'}`;\r\n}\r\n\r\nfunction generateGutter(theme, breakpoint) {\r\n  const styles = {};\r\n\r\n  SPACINGS.forEach(spacing => {\r\n    const themeSpacing = theme.spacing(spacing);\r\n\r\n    if (themeSpacing === 0) {\r\n      return;\r\n    }\r\n\r\n    styles[`spacing-${breakpoint}-${spacing}`] = {\r\n      margin: `-${getOffset(themeSpacing, 2)}`,\r\n      width: `calc(100% + ${getOffset(themeSpacing)})`,\r\n      '& > $item': {\r\n        padding: getOffset(themeSpacing, 2),\r\n      },\r\n    };\r\n  });\r\n\r\n  return styles;\r\n}\r\n\r\n// Default CSS values\r\n// flex: '0 1 auto',\r\n// flexDirection: 'row',\r\n// alignItems: 'flex-start',\r\n// flexWrap: 'nowrap',\r\n// justifyContent: 'flex-start',\r\nexport const styles = theme => ({\r\n  /* Styles applied to the root element */\r\n  root: {\r\n    marginLeft: theme.spacing(3),\r\n    marginRight: theme.spacing(3),\r\n    [theme.breakpoints.up('lg')]: {\r\n      marginLeft: '5.5%',\r\n      marginRight: '5.5%',\r\n    },\r\n  },\r\n  /* Styles applied to the root element if `container={true}`. */\r\n  container: {\r\n    boxSizing: 'border-box',\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    width: '100%',\r\n    marginLeft: '0',\r\n    marginRight: '0',\r\n  },\r\n  /* Styles applied to the root element if `item={true}`. */\r\n  item: {\r\n    boxSizing: 'border-box',\r\n    margin: '0', // For instance, it's useful when used with a `figure` element.\r\n  },\r\n  /* Styles applied to the root element if `zeroMinWidth={true}`. */\r\n  zeroMinWidth: {\r\n    minWidth: 0,\r\n  },\r\n  /* Styles applied to the root element if `direction=\"column\"`. */\r\n  'direction-xs-column': {\r\n    flexDirection: 'column',\r\n  },\r\n  /* Styles applied to the root element if `direction=\"column-reverse\"`. */\r\n  'direction-xs-column-reverse': {\r\n    flexDirection: 'column-reverse',\r\n  },\r\n  /* Styles applied to the root element if `direction=\"rwo-reverse\"`. */\r\n  'direction-xs-row-reverse': {\r\n    flexDirection: 'row-reverse',\r\n  },\r\n  /* Styles applied to the root element if `wrap=\"nowrap\"`. */\r\n  'wrap-xs-nowrap': {\r\n    flexWrap: 'nowrap',\r\n  },\r\n  /* Styles applied to the root element if `wrap=\"reverse\"`. */\r\n  'wrap-xs-wrap-reverse': {\r\n    flexWrap: 'wrap-reverse',\r\n  },\r\n  /* Styles applied to the root element if `alignItems=\"center\"`. */\r\n  'align-items-xs-center': {\r\n    alignItems: 'center',\r\n  },\r\n  /* Styles applied to the root element if `alignItems=\"flex-start\"`. */\r\n  'align-items-xs-flex-start': {\r\n    alignItems: 'flex-start',\r\n  },\r\n  /* Styles applied to the root element if `alignItems=\"flex-end\"`. */\r\n  'align-items-xs-flex-end': {\r\n    alignItems: 'flex-end',\r\n  },\r\n  /* Styles applied to the root element if `alignItems=\"baseline\"`. */\r\n  'align-items-xs-baseline': {\r\n    alignItems: 'baseline',\r\n  },\r\n  /* Styles applied to the root element if `alignContent=\"center\"`. */\r\n  'align-content-xs-center': {\r\n    alignContent: 'center',\r\n  },\r\n  /* Styles applied to the root element if `alignContent=\"flex-start\"`. */\r\n  'align-content-xs-flex-start': {\r\n    alignContent: 'flex-start',\r\n  },\r\n  /* Styles applied to the root element if `alignContent=\"flex-end\"`. */\r\n  'align-content-xs-flex-end': {\r\n    alignContent: 'flex-end',\r\n  },\r\n  /* Styles applied to the root element if `alignContent=\"space-between\"`. */\r\n  'align-content-xs-space-between': {\r\n    alignContent: 'space-between',\r\n  },\r\n  /* Styles applied to the root element if `alignContent=\"space-around\"`. */\r\n  'align-content-xs-space-around': {\r\n    alignContent: 'space-around',\r\n  },\r\n  /* Styles applied to the root element if `justify=\"center\"`. */\r\n  'justify-xs-center': {\r\n    justifyContent: 'center',\r\n  },\r\n  /* Styles applied to the root element if `justify=\"flex-end\"`. */\r\n  'justify-xs-flex-end': {\r\n    justifyContent: 'flex-end',\r\n  },\r\n  /* Styles applied to the root element if `justify=\"space-between\"`. */\r\n  'justify-xs-space-between': {\r\n    justifyContent: 'space-between',\r\n  },\r\n  /* Styles applied to the root element if `justify=\"space-around\"`. */\r\n  'justify-xs-space-around': {\r\n    justifyContent: 'space-around',\r\n  },\r\n  /* Styles applied to the root element if `justify=\"space-evenly\"`. */\r\n  'justify-xs-space-evenly': {\r\n    justifyContent: 'space-evenly',\r\n  },\r\n  ...generateGutter(theme, 'xs'),\r\n  ...theme.breakpoints.keys.reduce((accumulator, key) => {\r\n    // Use side effect over immutability for better performance.\r\n    generateGrid(accumulator, theme, key);\r\n    return accumulator;\r\n  }, {}),\r\n});\r\n","import Grid from '@material-ui/core/Grid';\r\nimport { styles } from './Grid.style';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\n\r\nconst StyledGrid = withStyles(styles, { name: 'MuiGrid' })(Grid);\r\nexport default StyledGrid;\r\n","import {\r\n  borders,\r\n  compose,\r\n  display,\r\n  flexbox,\r\n  palette,\r\n  positions,\r\n  shadows,\r\n  sizing,\r\n  spacing,\r\n  typography,\r\n  css,\r\n} from '@material-ui/system';\r\nimport { styled } from '@material-ui/styles';\r\n\r\nexport const styleFunction = css(\r\n  compose(\r\n    borders,\r\n    display,\r\n    flexbox,\r\n    positions,\r\n    palette,\r\n    shadows,\r\n    sizing,\r\n    spacing,\r\n    typography\r\n  )\r\n);\r\n\r\n/**\r\n * @ignore - do not document.\r\n */\r\nconst Box = styled('div')(styleFunction, { name: 'MuiBox' });\r\n\r\nexport default Box;\r\n","import i18next from 'i18next';\r\nexport const getDictionaryText = fieldName => {\r\n  return i18next.t && i18next.t(fieldName) || '';\r\n}","import { canUseDOM } from './canUseDOM';\r\nimport {\r\n  INSIDE_CHINA_COUNTRY_CODE,\r\n  LANGUAGE_CODE,\r\n  DOMAIN_SUFFIX,\r\n} from '../../constants';\r\nimport { get } from 'lodash';\r\n\r\nexport const cookie = {\r\n  writeSessionCookie: function(cname, cvalue) {\r\n    canUseDOM &&\r\n      (document.cookie = cname + '=' + cvalue + '; path=/' + '; secure;');\r\n  },\r\n  write: function(cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\r\n    var expires = 'expires=' + d.toUTCString();\r\n    canUseDOM &&\r\n      (document.cookie =\r\n        cname + '=' + cvalue + '; ' + expires + '; path=/' + '; secure;');\r\n  },\r\n  read: function(name) {\r\n    if (canUseDOM && document.cookie.indexOf(name) > -1) {\r\n      return document.cookie\r\n        .split(name)[1]\r\n        .split('; ')[0]\r\n        .substr(1);\r\n    } else {\r\n      return '';\r\n    }\r\n  },\r\n  delete: function(cname) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() - 1000);\r\n    var expires = 'expires=' + d.toUTCString();\r\n    canUseDOM && (document.cookie = cname + '=; ' + expires);\r\n  },\r\n};\r\n\r\nexport default cookie;\r\n\r\nexport const cookiesList = {\r\n  _Country: '_country',\r\n};\r\n\r\n//inside china OR browsing chinese site\r\nexport const isInsideChina = sitecoreContext => {\r\n  const countryCode =\r\n    cookie.read(cookiesList._Country) &&\r\n    cookie.read(cookiesList._Country).toLocaleLowerCase();\r\n  const language = get(sitecoreContext, 'language', LANGUAGE_CODE.DEFAULT);\r\n  return (\r\n    countryCode === INSIDE_CHINA_COUNTRY_CODE ||\r\n    isLanguageEqual(language, LANGUAGE_CODE.CHINESE)\r\n  );\r\n};\r\n\r\n// is china domain e.g. visitabudhabi.cn\r\nexport const isDomainCN = () => {\r\n  const locationHostArr = canUseDOM && window.location.hostname.split('.');\r\n  const domainCode =\r\n    locationHostArr && locationHostArr[locationHostArr.length - 1];\r\n  return domainCode && domainCode.toLowerCase() === 'cn';\r\n};\r\n\r\n//inside china AND not browsing site in chinese\r\nexport const evalConditionForInsideChina = language => {\r\n  const countryCode =\r\n    cookie.read(cookiesList._Country) &&\r\n    cookie.read(cookiesList._Country).toLocaleLowerCase();\r\n  return (\r\n    countryCode === INSIDE_CHINA_COUNTRY_CODE &&\r\n    !isLanguageEqual(language, LANGUAGE_CODE.CHINESE)\r\n  );\r\n};\r\n\r\n//outside china AND not browsing site in chinese\r\nexport const evalConditionForSocialShare = language => {\r\n  const countryCode =\r\n    cookie.read(cookiesList._Country) &&\r\n    cookie.read(cookiesList._Country).toLocaleLowerCase();\r\n  return !(\r\n    countryCode !== INSIDE_CHINA_COUNTRY_CODE &&\r\n    !isLanguageEqual(language, LANGUAGE_CODE.CHINESE)\r\n  );\r\n};\r\n\r\nexport const evalConditionForIcpLicense = language => {\r\n  if (isLanguageEqual(language, LANGUAGE_CODE.CHINESE)) {\r\n    return true;\r\n  } else {\r\n    const domainName = canUseDOM && window.location.hostname;\r\n    const domainSuffix =\r\n      domainName && domainName.substr(domainName.lastIndexOf('.'));\r\n    return domainSuffix === DOMAIN_SUFFIX.CHINA;\r\n  }\r\n};\r\n\r\nexport const isLanguageEqual = (selectedLanguage, checkLanguage) => {\r\n  const selectedLanguageLowerCase =\r\n    selectedLanguage && selectedLanguage.toLowerCase();\r\n  const checkLanguageLowerCase = checkLanguage && checkLanguage.toLowerCase();\r\n  return selectedLanguageLowerCase === checkLanguageLowerCase;\r\n};\r\n","// As we have some component variations based on the pageContentType, This is shared place to access the same\r\nimport get from 'lodash/get';\r\nexport const pageContentType = props => {\r\n  const contentType = get(\r\n    props,\r\n    'sitecoreContext.route.fields.contentType.fields.taxonomyKey.value',\r\n    ''\r\n  );\r\n  return contentType;\r\n};\r\n","import getAppConfig from '../global/utils/getAppConfig';\r\n\r\nconst config = getAppConfig();\r\nconst urls = {};\r\n\r\nexport default urls;\r\n\r\nexport const getFieldType = fieldUrl => {\r\n  return fieldUrl && fieldUrl.substring(fieldUrl.lastIndexOf('/') + 1);\r\n};\r\nexport const generatelayoutServicePath = (item, lang) => {\r\n  return `${config.sitecoreApiHost}/sitecore/api/layout/render/jss?item=${item}&sc_lang=${lang}&sc_apikey=${config.sitecoreApiKey}`;\r\n};\r\n\r\n//Used for modying API static values with dynamic ones\r\n// urlString- > 'trip-adviser/v1/api/partner/2.0/location/{location}?lang={language}`,\r\n//paramObj = { location: '1234',language: 'en'}\r\n//O/P -> 'trip-adviser/v1/api/partner/2.0/location/1234?lang='en'`,\r\nexport const modifyApi = (urlString, paramobj) => {\r\n  let apiPath = urlString;\r\n  if (paramobj) {\r\n    for (let key in paramobj) {\r\n      apiPath = apiPath.replace(`{${key}}`, paramobj[key]);\r\n    }\r\n  }\r\n  return apiPath;\r\n};\r\nexport const parseQueryParams = pathname => {\r\n  const search = pathname.split('?')[1];\r\n  if (search) {\r\n    const queryList = search.split('&');\r\n    return queryList.reduce((accu, curr) => {\r\n      const [key, value] = curr.split('=');\r\n      return { ...accu, [key]: value.split('#')[0] };\r\n    }, {});\r\n  }\r\n  return {};\r\n};\r\n\r\nexport const getUrlParam = param => {\r\n  if (typeof window === 'undefined') return '';\r\n  const params = new URL(window.location).searchParams;\r\n  return params.get(param);\r\n};\r\n\r\nexport const createUrlSearchParams = (query = {}, urlEncoded = false) => {\r\n  const queryParams = [];\r\n  const keys = Object.keys(query);\r\n  for (let i = 0, l = keys.length; i < l; i += 1) {\r\n    const qs = `${query[keys[i]]}`;\r\n    const qsencoded = urlEncoded ? encodeURIComponent(qs) : qs;\r\n    queryParams.push(`${keys[i]}=${qsencoded}`);\r\n  }\r\n  return queryParams.join('&');\r\n};\r\n\r\nexport const buildUrl = options => {\r\n  if (typeof options === 'object') {\r\n    const { pathname, query, urlEncoded } = options;\r\n    let url = pathname;\r\n    if (typeof query === 'object') {\r\n      url += `?${createUrlSearchParams(query, urlEncoded)}`;\r\n    }\r\n    return url;\r\n  }\r\n  return options;\r\n};\r\n"],"sourceRoot":""}